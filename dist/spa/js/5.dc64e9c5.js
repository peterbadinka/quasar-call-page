(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"382d":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-pa-sm"},[e("div",{staticClass:"row"},[e("q-btn",{staticClass:"q-mr-sm",attrs:{label:"",type:"submit",color:"primary"},on:{click:function(a){return t.reloadData()}}},[e("q-icon",{attrs:{name:"cached"}})],1),e("q-btn",{staticClass:"q-mr-sm",staticStyle:{display:"none"},attrs:{color:"primary",icon:"add"}}),e("q-select",{staticStyle:{width:"200px"},attrs:{outlined:"",label:"Dátum akcie",options:t.$store.state.databaza.filters.filterDataOptions},on:{input:function(a){return t.reloadData()}},model:{value:t.filterDateValue,callback:function(a){t.filterDateValue=a},expression:"filterDateValue"}}),t.contacts.length>0?e("q-input",{staticClass:"q-ml-sm",staticStyle:{width:"300px"},attrs:{outlined:"",label:"Vyhľadať"},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!1,2901929698),model:{value:t.search,callback:function(a){t.search=a},expression:"search"}}):t._e()],1),t.contacts.length>0?e("div",[e("table",{staticClass:"table q-mt-sm"},[e("tr",[e("th",[t._v("Meno")]),e("th",[t._v("Dátum")]),e("th",[t._v("Stav")]),e("th",[t._v("Okres")])]),t._l(t.rows,(function(a){return e("tr",{key:a.id_person,on:{click:function(e){return t.showContact(a)}}},[e("td",[t._v(t._s(a.name_full))]),e("td",[t._v(t._s(t.dateToDMY(a.datum_akcie)))]),e("td",[t._v(t._s(a.stav))]),e("td",[t._v(t._s(a.okres))])])}))],2),e("div",{staticClass:"popText"},[t._v("Počet riadkov: "+t._s(t.contacts.length))])]):t._e(),e("div",{staticClass:"q-pa-sm"},[e("q-dialog",{attrs:{persistent:"",maximized:t.maximizedToggle},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("q-card",[e("q-bar",{staticClass:"bg-primary text-white"},[e("q-btn",{attrs:{dense:"",flat:"",icon:"save",label:"Uložiť"},on:{click:function(a){return t.saveContact()}}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-white bg-green"}},[t._v("Uložiť")])],1),e("q-space"),e("q-btn",{attrs:{dense:"",flat:"",icon:"delete",label:"Vymazať"},on:{click:function(a){return t.deleteContact()}}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-white bg-red"}},[t._v("Vymazať")])],1),e("q-space"),e("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!t.maximizedToggle},on:{click:function(a){t.maximizedToggle=!1}}},[t.maximizedToggle?e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Minimize")]):t._e()],1),e("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:t.maximizedToggle},on:{click:function(a){t.maximizedToggle=!0}}},[t.maximizedToggle?t._e():e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Maximize")])],1),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),e("q-card-section",{staticClass:"q-pt-none"},[e("div",{staticClass:"row q-mt-md"},[e("q-input",{staticStyle:{width:"300px"},attrs:{outlined:"",label:"Meno"},model:{value:t.contactSelect.name_full,callback:function(a){t.$set(t.contactSelect,"name_full",a)},expression:"contactSelect.name_full"}}),e("q-input",{staticClass:"q-ml-xs",staticStyle:{width:"196px"},attrs:{outlined:"",label:"Mobil"},model:{value:t.contactSelect.phone,callback:function(a){t.$set(t.contactSelect,"phone",a)},expression:"contactSelect.phone"}})],1),e("div",{staticClass:"row"},[e("q-input",{staticClass:"q-mt-xs q-mr-xs",staticStyle:{width:"300px"},attrs:{outlined:"",label:"Email"},model:{value:t.contactSelect.email,callback:function(a){t.$set(t.contactSelect,"email",a)},expression:"contactSelect.email"}}),e("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"196px"},attrs:{outlined:"",type:"date",title:"Dátum akcie"},model:{value:t.contactSelect.datum_akcie,callback:function(a){t.$set(t.contactSelect,"datum_akcie",a)},expression:"contactSelect.datum_akcie"}})],1),e("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%"},attrs:{outlined:"",label:"Stav",title:t.contactSelect.stav},model:{value:t.contactSelect.stav,callback:function(a){t.$set(t.contactSelect,"stav",a)},expression:"contactSelect.stav"}}),e("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%px"},attrs:{outlined:"",label:"Poznámky",type:"textarea",rows:"15"},model:{value:t.contactSelect.poznamka,callback:function(a){t.$set(t.contactSelect,"poznamka",a)},expression:"contactSelect.poznamka"}})],1)],1)],1)],1),e("q-dialog")],1)},c=[],i=e("bc3a"),o=e.n(i),l=e("f508"),n=e("cf57"),r={data:()=>({search:null,filterDateValue:null,contacts:[],contactSelect:{},dialog:!1,maximizedToggle:!1}),methods:{reloadData(){l["a"].show({spinner:n["a"]}),this.$store.commit("databazaChangeFilterDate",this.filterDateValue),o.a.post("https://app-44.herokuapp.com/api/databaza/get-contacts",{dataUser:this.$store.state.app.appData.dataUser,filterDate:this.filterDateValue}).then((t=>{l["a"].hide(),"logout"==t.data&&this.$store.commit("logout"),null==t.data.err?(this.contacts=t.data.data,this.$store.commit("databazaSaveContacts",t.data.data)):this.showAlert("Error...")}))},showContact(t){this.contactSelect=JSON.parse(JSON.stringify(t)),this.contactSelect.datum_akcie=this.dateToYMD(t.datum_akcie),this.dialog=!0},saveContact(){l["a"].show({spinner:n["a"]}),o.a.post("https://app-44.herokuapp.com/api/databaza/set-contact",{dataUser:this.$store.state.app.appData.dataUser,dataContact:{id_user:this.contactSelect.id_user,id_person:this.contactSelect.id_person,date_upg:this.dateToYMD(new Date),name_full:this.contactSelect.name_full,phone:this.contactSelect.phone,email:this.contactSelect.email,datum_akcie:this.contactSelect.datum_akcie,stav:this.contactSelect.stav,poznamka:this.contactSelect.poznamka}}).then((t=>{if(void 0==t.data.data)return l["a"].hide(),void this.showAlert("Error...");this.reloadData(),this.dialog=!1}))},deleteContact(){l["a"].show({spinner:n["a"]}),o.a.post("https://app-44.herokuapp.com/api/databaza/delete-contact",{dataUser:this.$store.state.app.appData.dataUser,dataContact:{id_user:this.contactSelect.id_user,id_person:this.contactSelect.id_person,date_upg:this.dateToYMD(new Date),name_full:this.contactSelect.name_full,phone:this.contactSelect.phone,email:this.contactSelect.email,datum_akcie:this.contactSelect.datum_akcie,stav:this.contactSelect.stav,poznamka:this.contactSelect.poznamka,check_delete:"ok"}}).then((t=>{if(void 0==t.data.data)return l["a"].hide(),void this.showAlert("Error...");this.reloadData(),this.dialog=!1}))},showAlert(t){return this.$q.dialog({title:"Call-Page",message:t,ok:{color:"primary"},cancel:{color:"negative"}}),!1},dateToDMY(t){if(""==t||" "==t)return"";var a=new Date(t),e=a.getDate(),s=a.getMonth()+1,c=a.getFullYear();let i=(e<=9?"0"+e:e)+"."+(s<=9?"0"+s:s)+"."+c;return"NaN.NaN.NaN"==i&&(i=""),i},dateToYMD(t){let a=new Date(t),e=a.getDate(),s=a.getMonth()+1,c=a.getFullYear(),i=c+"-"+(s<=9?"0"+s:s)+"-"+(e<=9?"0"+e:e);return"NaN-NaN-NaN"==i&&(i="0000-00-00"),i}},computed:{cols(){return this.contacts.length>=1?Object.keys(this.contacts[0]):[]},rows(){return this.contacts.length?this.contacts.filter((t=>{let a=Object.values(t);return a.some((t=>!this.search||("string"===typeof t?t.includes(this.search):t.toString(10).includes(this.search))))})):[]}},mounted(){this.filterDateValue=this.$store.state.databaza.filters.filterDateValue,0==this.$store.state.databaza.contacts.length?this.reloadData():this.contacts=this.$store.state.databaza.contacts}},d=r,p=(e("c639"),e("2877")),u=e("9989"),h=e("9c40"),m=e("0016"),f=e("ddd8"),g=e("27f9"),_=e("24e8"),b=e("f09f"),v=e("d847"),S=e("05c0"),k=e("2c91"),q=e("a370"),w=e("7f67"),x=e("eebe"),D=e.n(x),C=Object(p["a"])(d,s,c,!1,null,null,null);a["default"]=C.exports;D()(C,"components",{QPage:u["a"],QBtn:h["a"],QIcon:m["a"],QSelect:f["a"],QInput:g["a"],QDialog:_["a"],QCard:b["a"],QBar:v["a"],QTooltip:S["a"],QSpace:k["a"],QCardSection:q["a"]}),D()(C,"directives",{ClosePopup:w["a"]})},7597:function(t,a,e){},c639:function(t,a,e){"use strict";e("7597")}}]);