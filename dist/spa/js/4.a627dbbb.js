(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"25f1":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{attrs:{padding:""}},[e("div",{staticClass:"row q-mb-md"},[e("q-btn",{staticClass:"q-mr-md",staticStyle:{width:"200px"},attrs:{label:"",type:"submit",color:"primary"},on:{click:t.newContact}},[e("div",{staticClass:"row"},[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"get_app"}}),t._v("\n\t\t\t\tNový kontakt\n\t\t\t")],1)]),e("q-btn",{staticClass:"q-mr-md",staticStyle:{width:"200px"},attrs:{label:"",type:"submit",color:"primary"},on:{click:t.sendCotnact}},[e("div",{staticClass:"row"},[e("q-icon",{staticClass:"q-pr-sm",attrs:{name:"send"}}),t._v("\n\t\t\t\tOdoslať kontakt\n\t\t\t")],1)]),e("q-select",{ref:"mesto",staticStyle:{width:"250px"},attrs:{label:"Mesto","transition-show":"flip-up","transition-hide":"flip-down",filled:"",options:t.options_m},scopedSlots:t._u([{key:"prepend",fn:function(){return[e("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:t.mesto_select,callback:function(a){t.mesto_select=a},expression:"mesto_select"}})],1),void 0!=t.new_contact.name_full?e("div",[e("div",{staticClass:"row text-h4"},[t._v(t._s(t.new_contact.name_full)+" ("+t._s(t.cp_contact_count)+")")]),e("div",{staticClass:"row text-h5"},[t._v(t._s(t.phone))])]):t._e(),e("div",{staticClass:"row q-mt-sm"},[e("q-select",{staticClass:"q-mr-xs",staticStyle:{width:"320px"},attrs:{label:"Stav",filled:"",options:t.stav_opt},model:{value:t.stav_select,callback:function(a){t.stav_select=a},expression:"stav_select"}}),e("q-input",{staticStyle:{width:"180px"},attrs:{filled:"",type:"date"},model:{value:t.datum_akcie,callback:function(a){t.datum_akcie=a},expression:"datum_akcie"}})],1),e("div",{},[e("div",{staticClass:"q-mt-xs"},[e("q-select",{staticStyle:{width:"100%"},attrs:{filled:"",options:t.options,label:"Produkty",multiple:"","emit-value":"","map-options":"",value:t.produkty},scopedSlots:t._u([{key:"option",fn:function(a){var s=a.itemProps,i=a.itemEvents,l=a.opt,o=a.selected,n=a.toggleOption;return[e("q-item",t._g(t._b({},"q-item",s,!1),i),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(l.label)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-toggle",{attrs:{value:o},on:{input:function(t){return n(l)}}})],1)],1)]}}]),model:{value:t.produkty,callback:function(a){t.produkty=a},expression:"produkty"}})],1)]),e("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%"},attrs:{label:"Poznamky",filled:"",type:"textarea"},model:{value:t.poznamka,callback:function(a){t.poznamka=a},expression:"poznamka"}}),e("div",{staticClass:"row"},[t.data_h_select.length>0?e("table",{staticClass:"table q-mt-md q-mb-md"},t._l(t.data_h_select,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(t.dateToDMY_hhmm(a.date_upg)))]),e("td",[t._v(t._s(a.id_user))]),e("td",[t._v(t._s(a.stav))]),e("td",[t._v(t._s(a.produkt))]),e("td",[t._v(t._s(a.poznamka))])])})),0):t._e()]),t.table_items_h.length>0?e("div",t._l(t.table_items_h,(function(a,s){return e("div",{key:s},[e("div",{staticStyle:{width:"30%","min-width":"450px"}},[e("hr")]),e("div",[t._v(t._s(t.dateToDMY_hhmm(a.date_upg))+", "+t._s(a.id_user)+", "),e("b",[t._v(t._s(a.stav))])]),a.produkt?e("div",[e("b",[t._v("Produkty: ")]),t._v(t._s(a.produkt))]):t._e(),a.poznamka?e("div",[e("b",[t._v("Poznámky: ")]),t._v(t._s(a.poznamka))]):t._e()])})),0):t._e(),e("q-btn",{staticClass:"q-mt-sm q-mb-xs",staticStyle:{width:"54px",height:"54px"},attrs:{label:"",type:"submit",color:"primary"},on:{click:t.reloadData}},[e("q-icon",{attrs:{name:"cached"}})],1),t.call_h.length>0?e("div",[e("table",{staticClass:"table"},[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("Dátum")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Meno")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Mobil")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Stav")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Produkty")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Poznamka")]),e("th",{staticStyle:{"text-align":"left"}},[t._v("Mesto")])]),t._l(t.call_h,(function(a,s){return e("tr",{key:s,on:{click:function(e){return t.selectItem(a)}}},[e("td",[t._v(t._s(t.dateToDMY(a.date_upg)))]),e("td",[t._v(t._s(a.name_full))]),e("td",[t._v(t._s(a.phone))]),e("td",[t._v(t._s(a.stav))]),e("td",[t._v(t._s(a.produkt))]),e("td",[t._v(t._s(a.poznamka))]),e("td",[t._v(t._s(a.okres))])])}))],2),e("div",{staticClass:"popText"},[t._v("Počet riadkov: "+t._s(t.call_h.length))])]):t._e(),e("div",{staticClass:"q-pa-md q-gutter-sm"},[e("q-dialog",{attrs:{maximized:t.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialogEdit,callback:function(a){t.dialogEdit=a},expression:"dialogEdit"}},[e("q-card",[e("q-bar",{staticClass:"bg-primary text-white"},[e("q-space"),e("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!t.maximizedToggle},on:{click:function(a){t.maximizedToggle=!1}}},[t.maximizedToggle?e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Minimize")]):t._e()],1),e("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:t.maximizedToggle},on:{click:function(a){t.maximizedToggle=!0}}},[t.maximizedToggle?t._e():e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Maximize")])],1),e("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[e("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),e("q-card-section",{staticClass:"q-pt-none q-mt-sm"},[void 0!=t.dataCall.name_full?e("div",{staticClass:"q-mt-sm"},[e("div",{staticClass:"row text-h4"},[t._v(t._s(t.dataCall.name_full))]),e("div",{staticClass:"row text-h5"},[t._v(t._s(t.dataCallPhone))])]):t._e(),e("div",{staticClass:"row q-mt-sm"},[e("q-select",{staticClass:"q-mr-xs",staticStyle:{width:"300px"},attrs:{label:"Stav",filled:"",options:t.stav_opt},model:{value:t.dataCall.stav,callback:function(a){t.$set(t.dataCall,"stav",a)},expression:"dataCall.stav"}}),e("q-input",{staticStyle:{width:"160px"},attrs:{filled:"",type:"date"},model:{value:t.dataCall.date_akcia,callback:function(a){t.$set(t.dataCall,"date_akcia",a)},expression:"dataCall.date_akcia"}})],1),e("div",{},[e("div",{staticClass:"q-mt-xs"},[e("q-select",{staticStyle:{width:"100%"},attrs:{filled:"",options:t.options,label:"Produkty",multiple:"","emit-value":"","map-options":"",value:t.produkty},scopedSlots:t._u([{key:"option",fn:function(a){var s=a.itemProps,i=a.itemEvents,l=a.opt,o=a.selected,n=a.toggleOption;return[e("q-item",t._g(t._b({},"q-item",s,!1),i),[e("q-item-section",[e("q-item-label",{domProps:{innerHTML:t._s(l.label)}})],1),e("q-item-section",{attrs:{side:""}},[e("q-toggle",{attrs:{value:o},on:{input:function(t){return n(l)}}})],1)],1)]}}]),model:{value:t.dataCallProdukty,callback:function(a){t.dataCallProdukty=a},expression:"dataCallProdukty"}})],1)]),e("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%"},attrs:{label:"Poznamky",filled:"",type:"textarea"},model:{value:t.dataCallPoznamka,callback:function(a){t.dataCallPoznamka=a},expression:"dataCallPoznamka"}}),e("q-btn",{staticClass:"q-mt-xs q-md-xs",staticStyle:{width:"150px",height:"35px"},attrs:{label:"Uložiť",type:"submit",color:"primary"},on:{click:t.saveChange}}),t.dataCallHistSelect.length>0?e("div",t._l(t.dataCallHistSelect,(function(a,s){return e("div",{key:s},[e("div",{staticStyle:{width:"30%","min-width":"450px"}},[e("hr")]),e("div",[t._v(t._s(t.dateToDMY_hhmm(a.date_upg))+", "+t._s(a.id_user)+", "),e("b",[t._v(t._s(a.stav))])]),a.produkt?e("div",[e("b",[t._v("Produkty: ")]),t._v(t._s(a.produkt))]):t._e(),a.poznamka?e("div",[e("b",[t._v("Poznámky: ")]),t._v(t._s(a.poznamka))]):t._e()])})),0):t._e()],1)],1)],1)],1),e("q-dialog")],1)},i=[],l=(e("5319"),e("bc3a")),o=e.n(l),n=e("f508"),d=e("cf57"),r={data(){return{new_contact:{},new_contact_send:!0,cp_contact_count:"",produkty:[],mesto_select:"",options:[{label:"Dôchodok - 2. pilier",value:"Dôchodok - 2. pilier"},{label:"Dôchodok - 3. pilier",value:"Dôchodok - 3. pilier"},{label:"Investícia - Podielové fondy",value:"Investícia - Podielové fondy"},{label:"Investícia - Sporiaci účet",value:"Investícia - Sporiaci účet"},{label:"Poistenie - Bytu",value:"Poistenie - Bytu"},{label:"Poistenie - Domácnosti",value:"Poistenie - Domácnosti"},{label:"Poistenie - Domu",value:"Poistenie - Domu"},{label:"Poistenie - Havarijné (HP)",value:"Poistenie - Havarijné (HP)"},{label:"Poistenie - Investičné životné (IŽP)",value:"Poistenie - Investičné životné (IŽP)"},{label:"Poistenie - Kapitalové (KŽP)",value:"Poistenie - Kapitalové (KŽP)"},{label:"Poistenie - Majetku",value:"Poistenie - Majetku"},{label:"Poistenie - Rizikové",value:"Poistenie - Rizikové"},{label:"Poistenie - Úrazové",value:"Poistenie - Úrazové"},{label:"Poistenie - Zákonné (PZP)",value:"Poistenie - Zákonné (PZP)"},{label:"Poistenie - Životné (ŽP)",value:"Poistenie - Životné (ŽP)"},{label:"Úver - Hypotekárny",value:"Úver - Hypotekárny"},{label:"Úver - Leasing",value:"Úver - Leasing"},{label:"Úver - Nebankové pôžičky",value:"Úver - Nebankové pôžičky"},{label:"Úver - Spotrebný",value:"Úver - Spotrebný"}],options_m:[],selected_item:{name_full:""},phone:"",stav_select:"",stav_opt:["vyzváňal","nedostupný","číslo neexistuje","nemá záujem","nemá záujem - starobný dôchodca","kontaktovať inokedy","dohodnuté stretnutie","nekontaktovať","nekontaktovať - osobný blacklist","potenciálny pohovor","klient"],table_items_h:[],table_items:[],datum_akcie:"",poznamka:"",data_h_select:[],call_h:[],dialogEdit:!1,maximizedToggle:!1,dataCall:{},dataCallHist:[],dataCallHistSelect:[],dataCallPhone:[],dataCallProdukty:[],dataCallPoznamka:""}},methods:{reloadData(){n["a"].show({spinner:d["a"]}),o.a.post("https://app-44.herokuapp.com/api/call-page/get-history",{dataUser:this.$store.state.app.appData.dataUser}).then((t=>{this.call_h=t.data.data,this.dataCallHist=t.data.data_h,n["a"].hide()}))},newContact(){if(void 0!=this.new_contact.name_full)return;if(this.mesto_select.length<4)return void this.showAlert('Je potrebne vybrať "Mesto"');n["a"].show({spinner:d["a"]});let t=this.$store.state.app.appData.dataUser;o.a.post("https://app-44.herokuapp.com/api/call-page/new-contact",{dataUser:t,okres:this.mesto_select}).then((t=>{"logout"==t.data?this.$store.commit("logout"):(this.new_contact=t.data.newContact,this.phone=this.formatPhone(t.data.newContact.phone),this.cp_contact_count=t.data.cp_contact_count,this.stav_select="",this.datum_akcie="0000-00-00",this.produkty=[],this.poznamka="",this.table_items_h=t.data.newContact_h,n["a"].hide())}))},sendCotnact(){if(void 0==this.new_contact.name_full)return;if(""==this.stav_select)return this.showAlert('Je potrebné vybrať "Stav".'),!1;if(("kontaktovať inokedy"==this.stav_select||"dohodnuté stretnutie"==this.stav_select)&&"0000-00-00"==this.datum_akcie)return this.showAlert("Je potrebné vybrať dátum kontaktu/stretutia."),!1;n["a"].show({spinner:d["a"]});let t=this.$store.state.app.appData.dataUser;o.a.post("https://app-44.herokuapp.com/api/call-page/update-new",{dataUser:t,dataContact:{id_string:this.new_contact.id_string,id_user:this.$store.state.app.appData.userName,stav:this.stav_select,date_akcia:this.dateToYMD(this.datum_akcie),date_upg:this.dateToYMD_hhmmss(new Date),produkt:this.produkty,poznamka:this.poznamka}}).then((t=>{1==t.data?(this.new_contact={},this.stav_select="",this.datum_akcie="0000-00-00",this.produkty=[],this.table_items_h=[],this.poznamka="",this.phone="",n["a"].hide()):(n["a"].hide(),this.showAlert("Error..."))}))},selectItem(t){this.dataCall=t,this.dataCall.date_akcia=this.dateToYMD(t.date_akcia),this.dataCallPhone=this.formatPhone(t.phone),this.dataCallPoznamka=t.poznamka,t.produkt.length>0?this.dataCallProdukty=t.produkt.split(","):this.dataCallProdukty=[],this.dialogEdit=!0,this.showHistory(t.phone)},showHistory(t){this.dataCallHistSelect=[];for(let a=0;a<this.dataCallHist.length;a++)t==this.dataCallHist[a].phone&&this.dataCallHistSelect.push(this.dataCallHist[a])},saveChange(){if(""==this.dataCall.stav)return this.showAlert('Je potrebné vybrať "Stav".'),!1;if(("kontaktovať inokedy"==this.dataCall.stav||"dohodnuté stretnutie"==this.dataCall.stav)&&"0000-00-00"==this.datum_akcie)return this.showAlert("Je potrebné vybrať dátum kontaktu/stretutia."),!1;n["a"].show({spinner:d["a"]});let t=this.$store.state.app.appData.dataUser;o.a.post("https://app-44.herokuapp.com/api/call-page/update",{dataUser:t,dataContact:{id_string:this.dataCall.id_string,id_user:this.$store.state.app.appData.userName,stav:this.dataCall.stav,date_akcia:this.dateToYMD(this.dataCall.date_akcia),date_upg:this.dateToYMD_hhmmss(new Date),produkt:this.dataCallProdukty,poznamka:this.dataCallPoznamka}}).then((t=>{1==t.data?(this.reloadData(),this.dialogEdit=!1):this.showAlert("Error...")}))},dateToDMY(t){if(""==t||" "==t)return"";var a=new Date(t),e=a.getDate(),s=a.getMonth()+1,i=a.getFullYear();let l=(e<=9?"0"+e:e)+"."+(s<=9?"0"+s:s)+"."+i;return"NaN.NaN.NaN"==l&&(l=""),l},showAlert(t){return this.$q.dialog({title:"Call-Page",message:t,ok:{color:"primary"},cancel:{color:"negative"}}),!1},dateToDMY_hhmm(t){let a=new Date(t),e=a.getMinutes(),s=a.getHours(),i=a.getDate(),l=a.getMonth()+1,o=a.getFullYear(),n=(i<=9?"0"+i:i)+"."+(l<=9?"0"+l:l)+"."+o;return n+=" "+(s<=9?"0"+s:s)+":"+(e<=9?"0"+e:e),n},dateToYMD_hhmmss(t){let a=new Date(t),e=a.getSeconds(),s=a.getMinutes(),i=a.getHours(),l=a.getDate(),o=a.getMonth()+1,n=a.getFullYear(),d=n+"-"+(o<=9?"0"+o:o)+"-"+(l<=9?"0"+l:l);return d+=" "+(i<=9?"0"+i:i)+":"+(s<=9?"0"+s:s)+":"+(e<=9?"0"+e:e),d},dateToYMD(t){let a=new Date(t),e=a.getDate(),s=a.getMonth()+1,i=a.getFullYear(),l=i+"-"+(s<=9?"0"+s:s)+"-"+(e<=9?"0"+e:e);return"NaN-NaN-NaN"==l&&(l="0000-00-00"),l},formatPhone(t){let a=t[0];return a+=t[1],a+=t[2],a+=t[3],a+="-",a+=t[4],a+=t[5],a+=t[6],a+="-",a+=t[7],a+=t[8],a+=t[9],a}},mounted(){let t=this.$store.state.app.appData.dataUser.cp_mesta;t=t.replace(/'/gi,"");let a=t.split(",");this.options_m=a,this.$nextTick((()=>{this.$refs.mesto.focus()}))},components:{}},c=r,p=(e("6151"),e("2877")),h=e("9989"),u=e("9c40"),m=e("0016"),_=e("ddd8"),v=e("27f9"),k=e("66e5"),b=e("4074"),g=e("0170"),y=e("9564"),C=e("24e8"),f=e("f09f"),w=e("d847"),P=e("2c91"),q=e("05c0"),x=e("a370"),z=e("7f67"),S=e("eebe"),D=e.n(S),M=Object(p["a"])(c,s,i,!1,null,null,null);a["default"]=M.exports;D()(M,"components",{QPage:h["a"],QBtn:u["a"],QIcon:m["a"],QSelect:_["a"],QInput:v["a"],QItem:k["a"],QItemSection:b["a"],QItemLabel:g["a"],QToggle:y["a"],QDialog:C["a"],QCard:f["a"],QBar:w["a"],QSpace:P["a"],QTooltip:q["a"],QCardSection:x["a"]}),D()(M,"directives",{ClosePopup:z["a"]})},"4b30":function(t,a,e){},6151:function(t,a,e){"use strict";e("4b30")}}]);