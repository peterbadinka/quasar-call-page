(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{2329:function(t,e,a){"use strict";a("48406")},48406:function(t,e,a){},c5d3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row"},[a("q-btn",{staticClass:"q-mr-md",staticStyle:{width:"54px",height:"54px"},attrs:{label:"",type:"submit",color:"primary"},on:{click:t.reloadData}},[a("q-icon",{attrs:{name:"cached"}})],1),t._e(),a("div",{staticClass:"q-pr-md"},[a("q-select",{ref:"mesto",staticStyle:{width:"250px"},attrs:{label:"Mesto","transition-show":"flip-up","transition-hide":"flip-down",filled:"",options:t.options},on:{input:t.reloadData},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"place"}})]},proxy:!0}]),model:{value:t.mesto_select,callback:function(e){t.mesto_select=e},expression:"mesto_select"}})],1),a("div",{staticClass:"q-gutter-md row items-start q-mr-md"},[a("q-input",{staticStyle:{width:"200px"},attrs:{filled:"",label:"Produkt",dense:t.dense},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reloadData(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchString,callback:function(e){t.searchString=e},expression:"searchString"}})],1),a("div",{staticClass:"q-gutter-md row items-start q-mr-md"},[a("q-input",{staticStyle:{width:"200px"},attrs:{filled:"","bottom-slots":"",label:"Meno",dense:t.dense},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reloadData(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchString_2,callback:function(e){t.searchString_2=e},expression:"searchString_2"}})],1),a("div",{staticClass:"q-gutter-md row items-start"},[a("q-input",{staticStyle:{width:"200px"},attrs:{filled:"","bottom-slots":"",label:"Mobil",dense:t.dense},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.reloadData(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.searchString_3,callback:function(e){t.searchString_3=e},expression:"searchString_3"}})],1)],1),t.table_items.length>0?a("div",[a("table",{staticClass:"table"},[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Dátum")]),a("th",{staticStyle:{"text-align":"left"}},[t._v("Meno")]),a("th",{staticStyle:{"text-align":"left"}},[t._v("Stav")]),a("th",{staticStyle:{"text-align":"left"}},[t._v("Produkty")]),a("th",{staticStyle:{"text-align":"left"}},[t._v("Poznamka")])]),t._l(t.table_items,(function(e,s){return a("tr",{key:s,on:{click:function(a){return t.selectItem(e)}}},[a("td",[t._v(t._s(t.dateToDMY(e.date_upg)))]),a("td",[t._v(t._s(e.name_full))]),a("td",[t._v(t._s(e.stav))]),a("td",[t._v(t._s(e.produkt))]),a("td",[t._v(t._s(e.poznamka))])])}))],2),a("div",{staticClass:"popText"},[t._v("Počet riadkov: "+t._s(t.table_items.length))])]):t._e(),a("q-dialog"),a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-dialog",{attrs:{maximized:t.maximizedToggle,"transition-show":"slide-up","transition-hide":"slide-down"},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[a("q-card",{},[a("q-bar",{staticClass:"bg-primary text-white"},[a("q-space"),a("q-btn",{attrs:{dense:"",flat:"",icon:"minimize",disable:!t.maximizedToggle},on:{click:function(e){t.maximizedToggle=!1}}},[t.maximizedToggle?a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Minimize")]):t._e()],1),a("q-btn",{attrs:{dense:"",flat:"",icon:"crop_square",disable:t.maximizedToggle},on:{click:function(e){t.maximizedToggle=!0}}},[t.maximizedToggle?t._e():a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Maximize")])],1),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-primary"}},[t._v("Close")])],1)],1),a("q-card-section",{staticClass:"q-pt-none"},[a("div",{staticClass:"text-h4 q-mt-md"},[t._v(t._s(t.selected_item.name_full))]),t.selected_item?a("div",{staticClass:"text-h5"},[t._v(t._s(t.phone))]):t._e(),a("div",{staticClass:"q-pr-md q-mt-xs"},[a("q-select",{staticStyle:{width:"527px"},attrs:{label:"Stav",filled:"",options:t.stav_opt},model:{value:t.stav_select,callback:function(e){t.stav_select=e},expression:"stav_select"}})],1),a("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"180px"},attrs:{filled:"",type:"date"},model:{value:t.datum_akcie,callback:function(e){t.datum_akcie=e},expression:"datum_akcie"}}),a("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%"},attrs:{label:"Produkty",filled:"",type:"text"},model:{value:t.produkty,callback:function(e){t.produkty=e},expression:"produkty"}}),a("q-input",{staticClass:"q-mt-xs",staticStyle:{width:"100%"},attrs:{label:"Poznamky",filled:"",type:"textarea"},model:{value:t.poznamka,callback:function(e){t.poznamka=e},expression:"poznamka"}}),a("q-btn",{staticClass:"q-mt-xs q-md-xs",staticStyle:{width:"150px",height:"35px"},attrs:{label:"Uložiť",type:"submit",color:"primary"},on:{click:t.saveChange}}),t.data_h_select.length>0?a("table",{staticClass:"table q-mt-md q-mb-md"},t._l(t.data_h_select,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(t.dateToDMY_hhmm(e.date_upg)))]),a("td",[t._v(t._s(e.id_user))]),a("td",[t._v(t._s(e.stav))]),a("td",[t._v(t._s(e.produkt))]),a("td",[t._v(t._s(e.poznamka))])])})),0):t._e()],1)],1)],1)],1)],1)},i=[],o=(a("5319"),a("bc3a")),n=a.n(o),l=a("f508"),r=a("cf57"),d={data(){return{stav_select:"",datum_akcie:"",produkty:"",poznamka:"",phone:"",maximizedToggle:!1,dialogShow:!1,stav_opt:["vyzváňal","nedostupný","číslo neexistuje","nemá záujem","nemá záujem - starobný dôchodca","kontaktovať inokedy","dohodnuté stretnutie","nekontaktovať","nekontaktovať - osobný blacklist","potenciálny pohovor","klient"],searchString:"",searchString_2:"",searchString_3:"",ph:"",dense:!1,model:null,mesto_select:[],options:[],table_items:[],data_h:[],data_h_select:[],selected_item:{},selected_item_h:""}},methods:{saveChange(){if(""==this.stav_select)return this.showAlert('Je potrebné vybrať "Stav".'),!1;if(("kontaktovať inokedy"==this.stav_select||"dohodnuté stretnutie"==this.stav_select)&&"0000-00-00"==this.datum_akcie)return this.showAlert("Je potrebné vybrať dátum kontaktu/stretutia."),!1;l["a"].show({spinner:r["a"]});let t=this.$store.state.app.appData.dataUser;n.a.post("/api/call-page/update",{dataUser:t,dataContact:{id_string:this.selected_item.id_string,id_user:this.$store.state.app.appData.userName,stav:this.stav_select,date_akcia:this.dateToYMD(this.datum_akcie),date_upg:this.dateToYMD_hhmmss(new Date),produkt:this.produkty,poznamka:this.poznamka}}).then((t=>{1==t.data?(this.reloadData(),this.dialogShow=!1):this.showAlert("Error...")}))},reloadData(){if(0==this.mesto_select.length)return this.$q.dialog({title:"Call-Page",message:'Je potrebne vybrať "Mesto"',ok:{color:"primary"},cancel:{color:"negative"}}),!1;l["a"].show({spinner:r["a"]});let t=this.$store.state.app.appData.dataUser;n.a.post("/api/call-page/custom-data",{dataUser:t,dataContact:{mesta:this.mesto_select,searchString:this.searchString,searchString_2:this.searchString_2,searchString_3:this.searchString_3}}).then((t=>{l["a"].hide(),"logout"==t.data?this.$store.commit("logout"):(this.data_h=[],this.table_items=[],this.table_items=t.data.data,this.data_h=t.data.data_h)}))},selectItem(t){this.selected_item=t,this.stav_select="",this.datum_akcie="0000-00-00",this.produkty="",this.poznamka="",this.phone=this.formatPhone(t.phone),this.showHistory(t.phone),this.dialogShow=!0},showHistory(t){this.data_h_select=[];for(let e=0;e<this.data_h.length;e++)t==this.data_h[e].phone&&this.data_h_select.push(this.data_h[e])},dateToDMY(t){if(""==t||" "==t)return"";var e=new Date(t),a=e.getDate(),s=e.getMonth()+1,i=e.getFullYear();let o=(a<=9?"0"+a:a)+"."+(s<=9?"0"+s:s)+"."+i;return"NaN.NaN.NaN"==o&&(o=""),o},showAlert(t){return this.$q.dialog({title:"Call-Page",message:t,ok:{color:"primary"},cancel:{color:"negative"}}),!1},dateToDMY_hhmm(t){let e=new Date(t),a=e.getMinutes(),s=e.getHours(),i=e.getDate(),o=e.getMonth()+1,n=e.getFullYear(),l=(i<=9?"0"+i:i)+"."+(o<=9?"0"+o:o)+"."+n;return l+=" "+(s<=9?"0"+s:s)+":"+(a<=9?"0"+a:a),l},dateToYMD_hhmmss(t){let e=new Date(t),a=e.getSeconds(),s=e.getMinutes(),i=e.getHours(),o=e.getDate(),n=e.getMonth()+1,l=e.getFullYear(),r=l+"-"+(n<=9?"0"+n:n)+"-"+(o<=9?"0"+o:o);return r+=" "+(i<=9?"0"+i:i)+":"+(s<=9?"0"+s:s)+":"+(a<=9?"0"+a:a),r},dateToYMD(t){let e=new Date(t),a=e.getDate(),s=e.getMonth()+1,i=e.getFullYear(),o=i+"-"+(s<=9?"0"+s:s)+"-"+(a<=9?"0"+a:a);return"NaN-NaN-NaN"==o&&(o="0000-00-00"),o},formatPhone(t){let e=t[0];return e+=t[1],e+=t[2],e+=t[3],e+="-",e+=t[4],e+=t[5],e+=t[6],e+="-",e+=t[7],e+=t[8],e+=t[9],e}},mounted(){let t=this.$store.state.app.appData.dataUser.cp_mesta;t=t.replace(/'/gi,"");let e=t.split(",");this.options=e,this.$nextTick((()=>{this.$refs.mesto.focus()}))},updated(){},components:{}},c=d,p=(a("2329"),a("2877")),h=a("9989"),m=a("9c40"),u=a("0016"),_=a("ddd8"),g=a("27f9"),k=a("24e8"),v=a("f09f"),y=a("d847"),f=a("2c91"),b=a("05c0"),x=a("a370"),q=a("7f67"),S=a("eebe"),w=a.n(S),C=Object(p["a"])(c,s,i,!1,null,null,null);e["default"]=C.exports;w()(C,"components",{QPage:h["a"],QBtn:m["a"],QIcon:u["a"],QSelect:_["a"],QInput:g["a"],QDialog:k["a"],QCard:v["a"],QBar:y["a"],QSpace:f["a"],QTooltip:b["a"],QCardSection:x["a"]}),w()(C,"directives",{ClosePopup:q["a"]})}}]);